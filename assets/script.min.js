let ComponentMessage={props:["m"],template:'\n<div class="card">\n  <div class="card-header">\n    <div class="d-flex justify-content-between">\n      <div class="fw-bold">{{m.user}}</div>\n      <div>{{m.date}}</div>\n    </div>\n  </div>\n  <div class="card-body">\n    {{m.message}}\n  </div>\n</div>'},ComponentMain={data:()=>({messages:[]}),components:{ComponentMessage:ComponentMessage},methods:{logout:function(){ApiRequest("logout",null,this,(function(s){MtData.session=!1}))},say:function(){ApiRequest("say",{message:document.getElementById("messageEditor").value},this)},list_messages:function(){ApiRequest("list_messages",null,this,(function(s){"ok"==s.status&&(console.log(s.list),this.messages=s.list)}))}},template:'\n<div id="actions" class="card mb-3">\n  <div class="card-body">\n    <div class="d-flex justify-content-between">\n      <div>\n        <a class="btn btn-primary" @click="list_messages();">Update Messages</a>\n      </div>\n      <div>\n        <a class="btn btn-secondary" @click="logout();">Logout</a>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="messages" class="card mb-3" v-if="messages.length > 0">\n  <div class="card-body">\n    <h5 class="card-title">Messages from chat</h5>\n    <component-message v-bind:m="m" v-for="m in messages" :key="m.message_id"></component-message>\n  </div>\n</div>\n\n<div id="messages" class="card">\n  <div class="card-body">\n    <h5 class="card-title">Say:</h5>\n    <textarea class="form-control" id="messageEditor" rows="10" placeholder="Message text"></textarea>\n    <a class="btn btn-success mt-3" @click="say()">Say</a>\n  </div>\n</div>\n'},ComponentStatus={props:{body:String,kind:{type:String,default:"primary"}},template:"\n<div v-if=\"body\" :class=\"['mb-3', 'alert', 'alert-' + kind]\" role=\"alert\">\n  {{body}}\n</div>"},ComponentAuth={data:()=>({count:0}),methods:{password:function(){ApiRequest("password",{password:document.getElementById("password").value},this,(function(s){"ok"==s.status?MtData.session=!0:document.getElementById("password").value=""}))}},template:'\n<div class="mb-3">\n  <label for="password" class="form-label">Password please</label>\n  <input type="password" class="form-control" id="password" @keyup.enter="password();">\n</div>\n<a class="btn btn-success" @click="password();">Authorize</a>\n'};var MtData={session:mtAuth,status:{body:"",kind:"primary"}};function ApiRequest(s,t,e,a){fetch("/api/"+s,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t??{})}).then((s=>s.json())).then((function(s){"ok"==s.status?MtData.status.kind="success":MtData.status.kind=s.status,MtData.status.body=s.message??"","function"==typeof a&&a.call(e,s)}))}Vue.createApp({delimiters:["[[","]]"],components:{ComponentStatus:ComponentStatus,ComponentAuth:ComponentAuth,ComponentMain:ComponentMain},data:()=>MtData=Vue.reactive(MtData)}).mount("#app");